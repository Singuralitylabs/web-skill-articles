# Claude Codeの基本

## はじめに

前回の記事では、AIに的確に意図を伝えるプロンプトの書き方を学びました。今回からは、いよいよ実際のツール「Claude Code」を使った開発に入っていきます。

Claude Codeは、Anthropic社が提供するターミナル型のAIコーディングツールです。ターミナル（黒い画面）から自然言語で指示を出すと、AIが自律的にファイルの作成・編集・コマンド実行などを行ってくれます。

この記事では、Claude Codeの概要、インストール方法、基本的な使い方、そして最低限覚えておくべきコマンドを解説します。

## Claude Codeとは

### ターミナル型AIコーディングツール

第2回の記事で紹介した通り、AI駆動開発ツールには「補完型」「IDE統合型」「ターミナル型」の3つの形態があります。Claude Codeはこのうちの「ターミナル型」に該当します。

ターミナル型の最大の特徴は、AIが自律的に作業を進めてくれることです。ファイルを読む、ファイルを作る、コードを編集する、コマンドを実行する、エラーを修正する。これらをすべてAIが自分で判断して実行します。

ユーザーがやることは、「何を作りたいか」「何をしてほしいか」を自然言語で伝えるだけです。

### Claude Codeの主な特徴

**プロジェクト全体を理解する**
Claude Codeは単一のファイルだけでなく、プロジェクト内の数百、数千のファイルを把握した上で、最適な解決策を提示します。「このプロジェクトの認証機能を改善して」のように、プロジェクト全体を見渡した指示を出すことができます。

**開発ライフサイクルを一貫してカバーする**
コードの生成・編集だけでなく、ファイル操作、テスト実行、Git管理、デプロイまでをClaude Code単体で完結できます。途中で別のツールに切り替える必要がありません。

**安全性に配慮した設計**
ファイルの作成・編集やコマンドの実行を行う前に、ユーザーに確認を求めます。AIが勝手にファイルを壊したり、意図しないコマンドを実行したりするリスクを抑えています。

**CLAUDE.mdによるルール設定**
プロジェクトのルートにCLAUDE.mdというファイルを置くことで、AIに守ってほしいルールを事前に伝えておけます。これにより、毎回同じ指示を出す必要がなくなります。

**外部ツールとの連携（MCP）**
MCP（Model Context Protocol）という仕組みを通じて、ブラウザ操作やデータベース接続など、さまざまな外部ツールと連携できます。MCPについては後の回で詳しく扱います。

## インストールと初期設定

### 前提条件

Claude Codeを使うには、以下の2つが必要です。

**Node.js（バージョン18以上）**
Claude CodeはNode.jsで動作します。まだインストールしていない場合は、Node.jsの公式サイト（https://nodejs.org/ ）からダウンロードしてインストールしてください。

**Anthropicのアカウント**
Claude Codeを使うには、Anthropicのアカウントが必要です。無料枠も存在しますが、本格的な開発にはPro（月額20ドル）以上の有料プランへの加入が推奨されます。料金体系については記事の後半で詳しく説明します。

### インストール手順

ターミナルを開いて、以下のコマンドを実行します。

```bash
npm install -g @anthropic-ai/claude-code
```

これでClaude Codeがグローバルにインストールされます。

なお、CLIの操作に慣れていない方は、GUIベースの代替ツール（例：Claudiaなど）を利用する選択肢もあります。ただし、この講座ではCLI版のClaude Codeを前提に解説を進めます。

### 初回起動と認証

インストールが完了したら、開発したいプロジェクトのディレクトリに移動してClaude Codeを起動します。

```bash
cd your-project
claude
```

初回起動時には、ブラウザが開いてAnthropicアカウントでのログインを求められます。ログインが完了すると、ターミナルに戻ってClaude Codeが使える状態になります。

## 基本的な使い方

### 指示を出す

Claude Codeが起動すると、入力プロンプトが表示されます。ここに自然言語で指示を入力するだけです。

```
> シンプルなHTMLファイルを作成して、Hello Worldを表示してください
```

AIがファイルの作成を提案し、ユーザーが承認すると実行されます。

### 操作の承認

Claude Codeがファイルの作成や編集を行う場合、実行前に確認が入ります。

内容を確認して問題なければ「y」を入力、やり直したい場合は「n」を入力します。この仕組みにより、AIが勝手にファイルを変更してしまう心配がありません。

### プランモード

第3回で紹介した「プランモード」は、新しい機能を開発する際に非常に重要な機能です。いきなり作り始めるのではなく、まず計画を立ててからAIに実装させることで、AIの暴走を防ぎ、精度の高い成果物を得ることができます。

プランモードの起動方法は2つあります。

**Shift + Tab で切り替える**
入力中に Shift + Tab を押すと、通常モードとプランモードを切り替えられます。

**/plan コマンドで起動する**
スラッシュコマンドとして /plan と入力することでもプランモードを起動できます。どのような技術スタックを使うか、どんな機能を実装するかをAIと事前にすり合わせることができます。

プランモードでは、AIはいきなりコードを書かず、まず「何をするか」の計画を提示してくれます。計画を確認し、方向性に問題がなければ「この計画で進めて」と指示して実装に移れるので、大きな手戻りを防げます。

特に初めてのプロジェクトや、複雑な機能を実装するときはプランモードの活用をおすすめします。

## 押さえておくべきコマンド

Claude Codeには、開発を効率化するためのスラッシュコマンドが用意されています。ここでは、最低限覚えておくべきコマンドを紹介します。

### /plan ：まず計画を立てる

新しい機能の開発に取りかかるとき、最初に実行すべきコマンドです。AIにいきなりコードを書かせるのではなく、まず計画を提示させることで、方向性のズレを防ぎます。

```
> /plan 猫の画像をランダムに表示するWebアプリを作りたい
```

AIが技術スタックや実装方針を提案してくれるので、内容を確認してから実装に進めます。基本的な使い方のセクションで紹介した Shift + Tab でのプランモード切り替えと同様の機能です。

### /help ：困ったときに

使い方がわからなくなったら、まずこのコマンドを実行しましょう。利用可能なコマンドの一覧と、それぞれの説明が表示されます。

```
> /help
```

### /init ：プロジェクトの初期設定

プロジェクトで初めてClaude Codeを使うときに実行するコマンドです。プロジェクトの構造を解析し、CLAUDE.mdファイルを自動生成してくれます。

```
> /init
```

CLAUDE.mdには、プロジェクトの概要や使用している技術、ディレクトリ構造などが記述されます。これにより、AIがプロジェクトの全体像を把握した状態で作業を始められます。

開発を始める最初の一歩として、まずこのコマンドを実行することをおすすめします。

### /context ：コンテキストの確認

第2回で学んだ「コンテキストウィンドウ」の使用状況を確認するコマンドです。

```
> /context
```

現在の会話がどれくらいのコンテキストを消費しているかを可視化できます。コンテキストが逼迫してきたら、次に紹介する /compact を使って圧縮しましょう。

### /compact ：コンテキストの圧縮

会話履歴を要約して圧縮し、コンテキストの空き容量を確保するコマンドです。

```
> /compact
```

長い会話を続けていると、コンテキストウィンドウが埋まってきます。そうなるとAIの応答精度が下がったり、過去の指示を忘れたりする原因になります。

/compact を実行すると、これまでの会話内容を要約した上で、詳細な履歴を削除します。要約は残るので、それまでの作業の流れが完全に失われるわけではありません。

目安として、大きな機能の実装が一段落したタイミングや、AIの応答がおかしくなってきたと感じたタイミングで実行すると良いでしょう。

### /clear ：会話のリセット

会話履歴を完全にクリアするコマンドです。

```
> /clear
```

/compact が「要約して圧縮する」のに対し、/clear は「すべて消す」コマンドです。まったく別のタスクに取りかかるときや、会話がこんがらがってしまったときに使います。

### /cost ：コスト確認

現在のセッションでどれくらいのトークンを消費したかを確認するコマンドです。

```
> /cost
```

第2回で学んだ通り、AIの利用にはトークンコストがかかります。定期的にコストを確認して、使いすぎていないかチェックする習慣をつけましょう。

## セッションの再開

Claude Codeを終了した後でも、前回のやり取りの続きから作業を再開できます。起動時にオプションを付けることで利用できます。

### claude -c ：前回の続きから再開

```bash
claude -c
```

前回のセッション（やり取り）の続きから再開します。「昨日の作業の続きをやりたい」というときに便利です。

### claude -r ：履歴から選んで再開

```bash
claude -r
```

過去のやり取りの履歴一覧が表示され、再開したいセッションを選択できます。「先週やった作業に戻りたい」「別のプロジェクトの続きをやりたい」というときに使います。

これらのオプションを活用すれば、毎回ゼロから説明し直す必要がなく、AIが前回のコンテキストを引き継いだ状態で作業を続けられます。

## ファイル参照（@メンション）

コマンドではありませんが、非常に重要な機能として「@メンション」があります。

会話の中で **@ファイル名** と入力すると、そのファイルの内容をAIに明示的に読み込ませることができます。

```
> @package.json の依存関係を確認して、不要なパッケージがないか教えて
```

```
> @src/components/Header.jsx を修正して、ナビゲーションメニューを追加して
```

AIは自動でファイルを検索して読み込むこともできますが、@メンションで明示的に指定した方が、確実に正しいファイルを参照してくれます。第2回で学んだコンテキストエンジニアリングの「選択（Select）」の原則を実践する、手軽で効果的な方法です。

## CLAUDE.mdを活用する

### CLAUDE.mdとは

CLAUDE.mdは、プロジェクトのルートに配置する設定ファイルです。ここに書いた内容は、Claude Codeを起動するたびに自動でコンテキストに読み込まれます。

言い換えれば、「毎回AIに伝えたいこと」を書いておく場所です。

### 何を書くべきか

**プロジェクトの概要**
このプロジェクトが何をするものか、どんな技術を使っているかを記述します。AIがプロジェクトの目的を理解した上で作業できるようになります。

**コーディングルール**
たとえば「変数名はキャメルケースで書く」「コメントは日本語で書く」「テストは必ず書く」といったルールを記述します。これにより、AIが生成するコードが一貫したスタイルになります。

**ディレクトリ構造**
どのディレクトリに何を置くかの説明を書いておくと、AIが適切な場所にファイルを作成してくれます。

**やってはいけないこと**
「このファイルは変更しないで」「このライブラリは使わないで」といった禁止事項も効果的です。

### CLAUDE.mdの例

```markdown
# プロジェクト概要

タスク管理アプリ。Next.js + TypeScript で構築。

## 技術スタック

- フレームワーク: Next.js 14（App Router）
- 言語: TypeScript
- スタイリング: Tailwind CSS
- データベース: Supabase

## コーディングルール

- コンポーネントは関数コンポーネントで作成する
- 状態管理はReact Hooksを使用する
- コメントは日本語で記述する
- 新しい機能には必ずテストを書く

## ディレクトリ構造

- src/app/ : ページコンポーネント
- src/components/ : 共通コンポーネント
- src/lib/ : ユーティリティ関数
- src/types/ : 型定義
```

CLAUDE.mdは /init コマンドで自動生成できますが、生成後に自分で内容を追加・調整することが大切です。プロジェクト固有のルールや慣習は、自分で書き加えましょう。

## 実践ワークフロー：猫の写真アプリを作ってみる

ここまで学んだコマンドを使って、実際にアプリを作る流れを見てみましょう。例として「猫の写真をランダムに表示するWebアプリ」を作成します。

### ステップ1：/plan で計画を立てる

まずプランモードで、技術スタックや実装方針をAIとすり合わせます。

```
> /plan 猫の写真をランダムに表示するWebアプリを作りたい。
> JavaScriptで、Cat APIを使って実装してほしい。
```

AIが「HTMLファイルを作成し、Cat APIからランダムな猫画像を取得して表示する」といった計画を提示してくれます。

### ステップ2：計画に基づいて実装

計画に問題がなければ、AIに実装を指示します。

```
> この計画で進めてください
```

AIが自動でHTMLファイル、JavaScript、CSSを作成し、Cat APIとの連携コードを書いてくれます。ファイルの作成ごとに確認が入るので、内容を見ながら承認していきます。

### ステップ3：/init でプロジェクト情報を固定化

実装が完了したら、/init でCLAUDE.mdを生成します。

```
> /init
```

これにより、プロジェクトの構成情報がCLAUDE.mdに記録されます。次回以降、Claude Codeを起動したときにAIがこのプロジェクトの前提を把握した状態で作業を開始できるようになります。

このように **「/plan で設計し、実装し、/init で情報を固定する」** という流れが、Claude Codeを使った開発の基本的なワークフローです。

## 料金体系について

Claude Codeの料金プランは以下の通りです。

**無料枠**
基本的な機能を試すことができますが、利用量に制限があります。お試しで触ってみる分には十分ですが、本格的な開発には向きません。

**Proプラン（月額20ドル）**
基本的な開発に十分な利用量が確保されます。個人開発や学習用途であれば、このプランで問題なく使えます。

**Maxプラン（月額100ドル〜200ドル）**
Proプランの5倍〜20倍の利用量が使えます。業務での本格利用や、大規模なプロジェクトに取り組む場合に適しています。

**従量課金制（API利用）**
使った分だけ料金が発生する方式です。開発量にムラがある場合や、チームでの利用に向いています。

まずはProプラン（月額20ドル）から始めて、自分の開発スタイルに合わせてプランを見直すのがおすすめです。

## よくあるトラブルと対処法

### AIの応答がおかしくなった

会話が長くなると、AIが過去の指示を忘れたり、同じ間違いを繰り返したりすることがあります。これはコンテキストウィンドウが逼迫しているサインです。

**対処法**：/compact でコンテキストを圧縮するか、/clear で会話をリセットしましょう。

### ファイルの変更が意図と違った

AIの提案を承認したものの、思っていた内容と違った場合があります。

**対処法**：慌てずに、「今の変更を元に戻して」と指示を出しましょう。また、重要な変更の前にはgitでコミットしておくと、いつでも元に戻せます。

### コマンドの実行が止まらない

AIが実行したコマンドが終わらない場合があります。

**対処法**：**Ctrl + C** で処理を中断できます。Escキーでも、AIの応答生成を停止できます。

## まとめ

この記事では、Claude Codeの基本的な使い方を学びました。

**Claude Codeの特徴**
- ターミナルから自然言語で指示を出すだけで、AIが自律的に開発を進めてくれる
- ファイル操作の前にユーザーに確認を求める安全設計
- CLAUDE.mdでプロジェクトルールを事前に設定できる

**最低限覚えておくべきコマンド**
- **/plan** ：計画を立ててから実装に進む
- **/help** ：コマンド一覧の確認
- **/init** ：プロジェクトの初期設定とCLAUDE.mdの生成
- **/context** ：コンテキスト使用量の確認
- **/compact** ：コンテキストの圧縮
- **/clear** ：会話のリセット
- **/cost** ：トークン消費量の確認
- **@ファイル名** ：特定ファイルの明示的な参照
- **claude -c / -r** ：前回のセッションから再開

**基本のワークフロー**
「/plan で設計し、実装し、/init でCLAUDE.mdを作る」。この流れを基本として覚えておきましょう。

**実践のポイント**
- プロジェクト開始時にまず /init を実行する
- CLAUDE.mdにプロジェクト固有のルールを書き加える
- 新しい機能の開発前は /plan で計画を立てる
- 定期的に /compact でコンテキストを整理する
- 重要な変更の前にはgitでコミットしておく
- 作業を中断するときは、次回 claude -c で再開できることを覚えておく

Claude Codeは「意図を伝えること」に集中できるツールです。コードを一行一行書く代わりに、「何を作りたいか」を言葉で伝える。その体験を、ぜひ実際に手を動かして感じてみてください。

次回は、Claude Codeを使って実際にWebアプリケーションを作成する実践編に入ります。

---

## プログラミングイベントのご案内
毎月数回、AIを活用したプログラミングを学べるオンライン講座を開催しております。直接学びたい方はぜひご参加ください。
申し込みフォームは[こちら](https://docs.google.com/forms/d/e/1FAIpQLScCLBSCJvZEl7R15tCDTajcKa7INCTSOKPEXyfIEX69Q_xtEg/viewform)
過去のプログラミングイベントの紹介は[こちら](https://sinlab.future-tech-association.org/school/)

## シンギュラリティ・ラボのご案内
オンラインサロン「シンギュラリティ・ラボ」（通称シンラボ）では、GASも含めたプログラミングをはじめ、さまざまなITスキルやチーム開発について学び、実践する場を準備しております。 初心者から経験者まで、どなたでも参加可能です。
少しでも興味がございましたらお気軽にお越しください。
シンギュラリティ・ラボHPは[こちら](https://sinlab.future-tech-association.org/join/)
お問い合わせ先 sinlab-recruit@future-tech-association.org

## GASアプリ開発サービスのお知らせ
シンギュラリティ・ラボでは、GASを中心としたWebアプリ開発のご相談を受け付けております。
普段の作業のちょっとした自動化から自分やチーム専用のカスタムアプリまで、ぜひお気軽にお問い合わせください。
詳細は[こちら](https://appdev.future-tech-association.org/)
